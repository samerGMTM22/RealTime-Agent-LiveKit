
> rest-express@1.0.0 dev
9:28:50 AM [express] serving on port 5000s
Browserslist: browsers data (caniuse-lite) is 8 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
9:28:58 AM [express] GET /api/agent-configs/active 304 in 80ms :: {"id":1,"userId":1,"name":"My YouT…
9:28:58 AM [express] GET /api/status 200 in 246ms :: {"livekit":"online","openai":"connected","mcp":…
9:28:59 AM [express] GET /api/agent-configs/active 304 in 60ms :: {"id":1,"userId":1,"name":"My YouT…
9:28:59 AM [express] GET /api/status 200 in 136ms :: {"livekit":"online","openai":"connected","mcp":…
9:29:01 AM [express] POST /api/livekit/rooms 201 in 835ms :: {"sid":"RM_WKBG9JEErcgP","name":"voice_…
9:29:01 AM [express] POST /api/livekit/token 200 in 0ms :: {"token":"eyJhbGciOiJIUzI1NiJ9.eyJ2aWRlby…
9:29:01 AM [express] GET /api/livekit/url 304 in 1ms :: {"url":"wss://test-project-eg4kodos.livekit.…
Starting Python LiveKit agent for room: voice_agent_session_1749806937279_hqub53gvr
Python LiveKit agent started for room voice_agent_session_1749806937279_hqub53gvr
9:29:02 AM [express] GET /api/conversations 200 in 7ms
Agent stdout: {"message": "starting worker", "level": "INFO", "name": "livekit.agents", "version": "1.0.23", "rtc-version": "1.0.8", "timestamp": "2025-06-13T09:29:03.617735+00:00"}

Agent stdout: {"message": "preloading plugins", "level": "INFO", "name": "livekit.agents", "packages": ["livekit.plugins.openai"], "timestamp": "2025-06-13T09:29:03.617867+00:00"}

Agent stdout: {"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 5563, "timestamp": "2025-06-13T09:29:04.852319+00:00"}

Agent stdout: {"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 5565, "timestamp": "2025-06-13T09:29:04.854873+00:00"}

Agent stdout: {"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 5567, "timestamp": "2025-06-13T09:29:04.860762+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 5569, "timestamp": "2025-06-13T09:29:04.864088+00:00"}

Agent stdout: {"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 5565, "elapsed_time": 0.08, "timestamp": "2025-06-13T09:29:04.934337+00:00"}

Agent stdout: {"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 5567, "elapsed_time": 0.08, "timestamp": "2025-06-13T09:29:04.939904+00:00"}

Agent stdout: {"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 5563, "elapsed_time": 0.09, "timestamp": "2025-06-13T09:29:04.944415+00:00"}

Agent stdout: {"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 5569, "elapsed_time": 0.08, "timestamp": "2025-06-13T09:29:04.946814+00:00"}

Agent stdout: {"message": "see tracing information at http://localhost:8081/debug", "level": "INFO", "name": "livekit.agents", "timestamp": "2025-06-13T09:29:04.947490+00:00"}

Agent stdout: {"message": "registered worker", "level": "INFO", "name": "livekit.agents", "id": "AW_mP9nXtKw6WRm", "url": "wss://test-project-eg4kodos.livekit.cloud", "region": "US West", "protocol": 16, "timestamp": "2025-06-13T09:29:05.120785+00:00"}

Agent stdout: {"message": "received job request", "level": "INFO", "name": "livekit.agents", "job_id": "AJ_VfVvkSAUuyAN", "dispatch_id": "", "room_name": "voice_agent_session_1749806937279_hqub53gvr", "agent_name": "", "resuming": false, "timestamp": "2025-06-13T09:29:05.174315+00:00"}

Agent stdout: {"message": "Starting agent for room: voice_agent_session_1749806937279_hqub53gvr", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.212229+00:00"}

Agent stdout: {"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 5577, "timestamp": "2025-06-13T09:29:05.240989+00:00"}

9:29:05 AM [express] GET /api/agent-configs/1 200 in 65ms :: {"id":1,"userId":1,"name":"My YouTube A…
Agent stdout: {"message": "Fetched config from database: My YouTube Agent", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.281985+00:00"}
{"message": "Using agent config: My YouTube Agent", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.282156+00:00"}
{"message": "Voice: coral, Temperature: 0.7", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.282225+00:00"}

Agent stdout: {"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 5577, "elapsed_time": 0.07, "timestamp": "2025-06-13T09:29:05.314471+00:00"}

Agent stdout: {"message": "Attempting OpenAI Realtime API connection", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.746353+00:00"}

Agent stdout: {"message": "OpenAI Realtime API session started successfully", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.766802+00:00"}

Agent stdout: {"message": "Give Me the Mic agent is running and ready for voice interactions", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.766902+00:00"}
{"message": "Agent entering session, generating initial greeting", "level": "INFO", "name": "voice-agent", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:29:05.767094+00:00"}

9:29:32 AM [express] GET /api/status 200 in 2448ms :: {"livekit":"online","openai":"connected","mcp"…
9:30:03 AM [express] GET /api/status 200 in 472ms :: {"livekit":"online","openai":"connected","mcp":…
9:30:33 AM [express] GET /api/status 200 in 424ms :: {"livekit":"online","openai":"connected","mcp":…
Agent stdout: {"message": "process exiting", "level": "INFO", "name": "livekit.agents", "reason": "room disconnected", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:30:45.905718+00:00"}

Agent stdout: {"message": "AgentSession is closing due to unrecoverable error\nlivekit.agents._exceptions.APIConnectionError: OpenAI S2S connection closed unexpectedly", "level": "ERROR", "name": "livekit.agents", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:30:45.906685+00:00"}

Agent stdout: {"message": "Error in _recv_task\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/utils/log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/plugins/openai/realtime/realtime_model.py\", line 581, in _recv_task\n    raise error\nException: OpenAI S2S connection closed unexpectedly", "level": "ERROR", "name": "livekit.plugins.openai", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:30:45.906987+00:00"}

Agent stdout: {"message": "Error in _main_task\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/utils/log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/plugins/openai/realtime/realtime_model.py\", line 669, in _main_task\n    await asyncio.gather(*tasks)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/utils/log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/plugins/openai/realtime/realtime_model.py\", line 581, in _recv_task\n    raise error\nException: OpenAI S2S connection closed unexpectedly", "level": "ERROR", "name": "livekit.plugins.openai", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:30:45.908112+00:00"}

Agent stdout: {"message": "Task exception was never retrieved\nfuture: <Task finished name='Task-264' coro=<AgentSession._on_error.<locals>.drain_and_close() done, defined at /home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/voice/agent_session.py:570> exception=Exception('OpenAI S2S connection closed unexpectedly')>\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/voice/agent_session.py\", line 572, in drain_and_close\n    await self._aclose_impl(error=error)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/voice/agent_session.py\", line 424, in _aclose_impl\n    await self._activity.aclose()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/voice/agent_activity.py\", line 442, in aclose\n    await self._rt_session.aclose()\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/plugins/openai/realtime/realtime_model.py\", line 938, in aclose\n    await self._main_atask\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/utils/log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/plugins/openai/realtime/realtime_model.py\", line 669, in _main_task\n    await asyncio.gather(*tasks)\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/utils/log.py\", line 16, in async_fn_logs\n    return await fn(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/plugins/openai/realtime/realtime_model.py\", line 581, in _recv_task\n    raise error\nException: OpenAI S2S connection closed unexpectedly", "level": "ERROR", "name": "asyncio", "pid": 5565, "job_id": "AJ_VfVvkSAUuyAN", "timestamp": "2025-06-13T09:30:45.908751+00:00"}

9:31:05 AM [express] GET /api/status 200 in 1433ms :: {"livekit":"online","openai":"connected","mcp"…
9:31:36 AM [express] GET /api/status 200 in 489ms :: {"livekit":"online","openai":"connected","mcp":…
9:32:07 AM [express] GET /api/status 200 in 484ms :: {"livekit":"online","openai":"connected","mcp":…
9:32:37 AM [express] GET /api/status 200 in 470ms :: {"livekit":"online","openai":"connected","mcp":…
9:33:08 AM [express] GET /api/status 200 in 433ms :: {"livekit":"online","openai":"connected","mcp":…
9:33:39 AM [express] GET /api/status 200 in 443ms :: {"livekit":"online","openai":"connected","mcp":…
9:34:09 AM [express] GET /api/status 200 in 401ms :: {"livekit":"online","openai":"connected","mcp":…
9:34:40 AM [express] GET /api/status 200 in 397ms :: {"livekit":"online","openai":"connected","mcp":…